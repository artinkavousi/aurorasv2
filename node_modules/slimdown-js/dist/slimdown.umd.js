!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n||self).slimdownJs={})}(this,function(n){function e(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var t=[],r=[],l=[],i=[],o=[],u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=new RegExp("["+Object.keys(u).join("")+"]","g"),p=function(n){return n.replace(a,function(n){return u[n]})},f=function(n,e){var t=e.trim();return/^<\/?(ul|ol|li|h|p|bl|table|tbody|tr|td|th|caption)/i.test(t)||""===t?"\n"+e+"\n":"\n<p>\n"+t+"\n</p>\n"},c=function(n){if(0===n.length)return"";for(var e="",t=[],r=0;r<n.length;r++){for(var l=n[r],i=r<n.length-1?n[r+1]:null;t.length>0&&t[t.length-1].level>l.level;){var o=t.pop();o.hasOpenLi&&(e+="</li>"),e+="</"+o.type+">"}if(t.length>0&&t[t.length-1].level===l.level&&t[t.length-1].type!==l.type){var u=t.pop();u.hasOpenLi&&(e+="</li>"),e+="</"+u.type+">"}(0===t.length||t[t.length-1].level<l.level)&&(e+="<"+l.type+">",t.push({type:l.type,level:l.level,hasOpenLi:!1})),t.length>0&&t[t.length-1].hasOpenLi&&t[t.length-1].level===l.level&&(e+="</li>",t[t.length-1].hasOpenLi=!1),e+="<li>"+l.content,t[t.length-1].hasOpenLi=!0,(!i||i.level<=l.level)&&(e+="</li>",t[t.length-1].hasOpenLi=!1)}for(;t.length>0;){var a=t.pop();a.hasOpenLi&&(e+="</li>"),e+="</"+a.type+">"}return e},h=function(n,e,t,r){void 0===r&&(r="");for(var l=t.split("|").filter(function(n,e,t){return e>0&&e<t.length-1}).map(function(n){return/:-+:/g.test(n)?"center":/-+:/g.test(n)?"right":/:-+/.test(n)?"left":""}),i=function(n){var e=l[n];return e?' align="'+e+'"':""},o=e.split("|").slice(1,-1),u=o.map(function(n){return n.trim()}),a=[],p=0,f=0;f<u.length;f++)if(p>0)p--;else{var c=u[f];if(c&&c.length){for(var h=1,g=!1,s=f+1;s<u.length&&0===u[s].length;s++)if(""===o[s]){g=!0;break}if(g)for(var d=f+1;d<u.length&&0===u[d].length;d++)h++;h>1?(p=h-1,a.push("<th"+i(f)+' colspan="'+h+'">'+c+"</th>")):a.push("<th"+i(f)+">"+c+"</th>")}else a.push("<th"+i(f)+"></th>")}return"\n<table><tbody><tr>\n  "+a.join("\n  ")+"\n</tr>\n"+r.split("\n").map(function(n){return n.trim()}).filter(function(n){return n&&n.length}).map(function(n){for(var e=n.split("|").slice(1,-1),t=e.map(function(n){return n.trim()}),r=[],l=0,o=0;o<t.length;o++)if(l>0)l--;else{var u=t[o];if(u&&u.length){for(var a=1,p=!1,f=o+1;f<t.length&&0===t[f].length;f++)if(""===e[f]){p=!0;break}if(p)for(var c=o+1;c<t.length&&0===t[c].length;c++)a++;a>1?(l=a-1,r.push("<td"+i(o)+' colspan="'+a+'">'+u+"</td>")):r.push("<td"+i(o)+">"+u+"</td>")}else r.push("<td"+i(o)+"></td>")}return"<tr>\n  "+r.join("\n  ")+"\n</tr>\n"}).join("")+"</tbody></table>\n"},g=[[/\r\n/g,"\n"],[/\n(#+)(.*)/g,function(n,e,t){void 0===t&&(t="");var r=e.length;return"<h"+r+">"+t.trim()+"</h"+r+">"}],[/!\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g,'<img src="$2" alt="$1">'],[/\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g,'<a href="$2">$1</a>'],[/([^\\])(\*\*|__)(.*?(_|\*)?)\2/g,"$1<strong>$3</strong>"],[/([^\\])(\*|_)(.*?)\2/g,"$1<em>$3</em>"],[/\\_/g,"&#95;"],[/\~\~(.*?)\~\~/g,"<del>$1</del>"],[/\:\"(.*?)\"\:/g,"<q>$1</q>"],[/\n-{3,}/g,"\n<hr />"],[/\n( *)[-*+] \[([xX ])\](.*)/g,function(n,e,t,r){return"\n{{LISTITEM:ul:"+Math.floor(e.length/2)+':<input type="checkbox"'+("x"===t.toLowerCase()?" checked":"")+" disabled> "+r.trim()+"}}\n"}],[/\n( *)(\*|-|\+)(.*)/g,function(n,e,t,r){return"\n{{LISTITEM:ul:"+Math.floor(e.length/2)+":"+r.trim()+"}}\n"}],[/\n( *)([0-9]+\.) (.*)/g,function(n,e,t,r){return"\n{{LISTITEM:ol:"+Math.floor(e.length/2)+":"+r.trim()+"}}\n"}],[/\n(&gt;|\>)(.*)/g,function(n,e,t){return void 0===t&&(t=""),"\n<blockquote>"+t.trim()+"</blockquote>"}],[/(\^)(.*?)\1/g,"<sup>$2</sup>"],[/(\~)(.*?)\1/g,"<sub>$2</sub>"],[/\n\[(.+?)\]\n( *\|[^\n]+\|\r?\n)((?: *\|:?[ -]+:?)+ *\|)(\n(?: *\|[^\n]+\|\r?\n?)*)?/g,function(n,e,t,r,l){return void 0===l&&(l=""),h(0,t,r,l).replace("<table>","<table><caption>"+e.trim()+"</caption>")}],[/( *\|[^\n]+\|\r?\n)((?: *\|:?[ -]+:?)+ *\|)(\n(?: *\|[^\n]+\|\r?\n?)*)?/g,h],[/\[\^([^\]]+)\](?!:)/g,function(n,e){return'<sup id="fnref:'+e+'"><a href="#fn:'+e+'">['+e+"]</a></sup>"}],[/\[\^([^\]]+)\]:\s*((?:[^\n]*\n?)*)/g,function(n,e,t){return o.push([e,t.trim()]),""}],[/\n([A-Z][A-Za-z\s]*?)\s:\s*([A-Z][^\n]*)/g,function(n,e,t){return"\n<dl><dt>"+e.trim()+"</dt><dd>"+t.trim()+"</dd></dl>\n"}]],s=[[/\s?<\/[ou]l>\s?<[ou]l>/g,"",3],[/<\/blockquote>\n<blockquote>/g,"<br>\n"],[/https?:\/\/[^"']*/g,function(n){return n.replace(/<\/?em>/g,"_")}],[/&#95;/g,"_"]];n.addRule=function(n,e){g.push([n,e])},n.render=function(n,u,a){return void 0===u&&(u=!1),void 0===a&&(a=!1),t.length=0,r.length=0,l.length=0,i.length=0,o.length=0,n=function(n){return n.replace(/\$([^$\n]+)\$/g,function(n,e){return i.push(e),"{{INLINEMATHPH"+(i.length-1)+"}}"})}(n=function(n){return n.replace(/`([^`]+)`/g,function(n,e){return r.push(e),"{{INLINECODEPH"+(r.length-1)+"}}"})}(n=function(n){return n.replace(/\n\s*\$\$([^]*?)\$\$\s*\n/g,function(n,e){return l.push(e.trim()),"\n{{MATHBLOCKPH"+(l.length-1)+"}}\n"})}(n=function(n){return n.replace(/\n\s*```\w*\n([^]*?)\n\s*```\s*\n/g,function(n,e){return t.push(e),"\n<pre>{{CODEBLOCKPH"+(t.length-1)+"}}</pre>\n"})}("\n"+n+"\n")))),g.forEach(function(e){for(var t=e[0],r=e[1],l=e[2],i=void 0===l?1:l,o=0;o<i;o++)n=n.replace(t,r)}),n=(n=function(n){if(!n.includes("{{LISTITEM:"))return n;for(var t,r=[],l=[],i=!1,o=function(n,t){var r;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(r=function(n,t){if(n){if("string"==typeof n)return e(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,t):void 0}}(n))){r&&(n=r);var l=0;return function(){return l>=n.length?{done:!0}:{done:!1,value:n[l++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=n[Symbol.iterator]()).next.bind(r)}(n.split("\n"));!(t=o()).done;){var u=t.value,a=u.match(/\{\{LISTITEM:([^:]+):([^:]+):(.+)\}\}/);if(a){var p=a[1],f=parseInt(a[2]);if(i&&l.length>0){var h=l[l.length-1];h.type!==p&&h.level===f&&(r.push([].concat(l)),l=[])}l.push({type:p,level:f,content:a[3],originalLine:u}),i=!1}else""!==u.trim()?(l.length>0&&(r.push([].concat(l)),l=[]),i=!1):""===u.trim()&&(i=!0)}if(l.length>0&&r.push(l),0===r.length)return n;for(var g=0,s=r;g<s.length;g++){var d=s[g],v=c(d);n=n.replace(d[0].originalLine,v);for(var m=1;m<d.length;m++)n=n.replace(d[m].originalLine,"")}return n}(n)).replace(/\n([^\n]+)\n/g,f),s.forEach(function(e){for(var t=e[0],r=e[1],l=e[2],i=void 0===l?1:l,o=0;o<i;o++)n=n.replace(t,r)}),n=(n=function(n){return n.replace(/{{INLINEMATHPH(\d+)}}/g,function(n,e){var t=i[parseInt(e)];return'<span class="math-inline">'+p(t)+"</span>"})}(n=function(n){return n.replace(/{{INLINECODEPH(\d+)}}/g,function(n,e){var t=r[parseInt(e)];return"<code>"+p(t)+"</code>"})}(n=function(n){return n.replace(/{{MATHBLOCKPH(\d+)}}/g,function(n,e){var t=l[parseInt(e)];return'<div class="math-block">'+p(t)+"</div>"})}(n=function(n){return n.replace(/<pre>{{CODEBLOCKPH(\d+)}}<\/pre>/g,function(n,e){var r=t[parseInt(e)];return"<pre>"+p(r)+"</pre>"})}(n))))).trim()+(0===o.length?"":'\n<div class="footnotes">\n  <hr>\n  <ol>\n    '+o.map(function(n){var e=n[0];return'\n    <li id="fn:'+e+'">\n      '+n[1]+'\n      <sup><a href="#fnref:'+e+'">â†©</a></sup>\n    </li>'}).join("\n")+"\n  </ol>\n</div>"),u&&(n=n.replace(/^<p>([\s\S]*)<\/p>$/,"$1")),a&&(n=n.replace(/<a href="/g,'<a target="_blank" href="')),n}});
//# sourceMappingURL=slimdown.umd.js.map
